/* ==========================================================================
   Kelvin Mo — Site Styles (clean, iOS-stable, cyberpunk cool)
   ========================================================================== */

/* -----------------------------
   0) Design tokens / color system
   ----------------------------- */
:root{
  /* Base (dark defaults) */
  --bg: #0a0f1f;           /* deep space blue */
  --fg: #e6ecf8;           /* high-contrast text */
  --muted:#99a6bb;         /* secondary text */
  --card:#0f1630;          /* card surface */
  --card-border: rgba(255,255,255,.08);

  /* Neon triplets for rgba() */
  --c-cyan:   63, 209, 255;   /* neon cyan */
  --c-indigo: 74,  92, 255;   /* electric indigo */
  --c-violet:132,  73, 255;   /* electric violet */

  /* Links / accents */
  --accent:#3fd1ff;
  --link:#5ad6ff;
  --link-hover:#d9f3ff;
  --link-underline: rgba(90,214,255,.45);

  /* Radii / shadows / spacing scale */
  --radius: 14px;
  --shadow: 0 6px 24px rgba(0,0,0,.25), 0 1px 0 rgba(255,255,255,.03) inset;
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-5: 1.5rem;
  --space-6: 2rem;

  color-scheme: dark light;
}

/* Light theme overrides (still cool, not sugary) */
html[data-theme="light"]{
  --bg:#eef6ff;
  --fg:#0b1222;
  --muted:#5b667a;
  --card:#ffffff;
  --card-border: rgba(0,0,0,.08);

  --accent:#0ea5e9;
  --link:#0a66ff;
  --link-hover:#084ccc;
  --link-underline: rgba(10,102,255,.35);
}

/* -----------------------------
   1) Resets / typography
   ----------------------------- */
*{ box-sizing: border-box; }
html, body{ height:100%; min-height:100%; margin:0; padding:0; }
html{ background: var(--bg); } /* 仅兜底纯色，避免画渐变在 html */
body{
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI",
               Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
               "Segoe UI Emoji";
  line-height: 1.6;
  color: var(--fg);
  background-color: var(--bg); /* 与 html 一致，任何透明区域不显缝 */
  overflow-x: hidden;
  position: relative;
}

/* Type scale */
h1,h2,h3,h4{ margin: 0 0 var(--space-3); line-height: 1.25; }
h1{ font-size: clamp(1.75rem, 2vw + 1.2rem, 2.6rem); }
h2{ font-size: clamp(1.35rem, 1.2vw + 1rem, 1.8rem); }
h3{ font-size: 1.1rem; }
p{ margin: 0 0 var(--space-4); color: var(--fg); }
small,.muted{ color: var(--muted); }

/* Lists */
ul{ margin: 0; padding-left: 1.2rem; }

/* Links */
a{
  color: var(--link);
  text-decoration: underline;
  text-decoration-color: var(--link-underline);
  text-underline-offset: 3px;
  transition: color .2s ease, text-decoration-color .2s ease;
}
a:hover, a:focus{
  color: var(--link-hover);
  text-decoration-color: currentColor;
}

/* -----------------------------
   2) SINGLE-LAYER global background (iOS-safe)
   把视觉背景画在 body，避免 html 绑定视口造成“第二块背景”
   ----------------------------- */
@property --angle { syntax:"<angle>"; inherits:false; initial-value:0deg; }

body{
  --angle: 0deg;

  /* 主 conic 渐变 + 一处深处补光（避免第2-3屏“褪成一片蓝”） */
  background:
    conic-gradient(from var(--angle) at 50% 28%,
      rgba(var(--c-cyan),  .22) 0deg,
      rgba(var(--c-indigo),.18) 110deg,
      rgba(var(--c-violet),.24) 220deg,
      rgba(var(--c-cyan),  .22) 360deg),
    radial-gradient(140vh 80vh at 50% 120vh,
      rgba(var(--c-violet),.10) 0%,
      rgba(var(--c-indigo),.10) 40%,
      rgba(var(--c-cyan),  .08) 75%,
      transparent 100%);

  background-repeat: no-repeat;
  background-size: 240% 240%, 200% 200%;
  background-position: 50% 44%, 50% 120vh;

  animation: rot 36s linear infinite, drift 28s ease-in-out infinite alternate;
}

@keyframes rot{ to{ --angle:360deg; } }
@keyframes drift{
  0%   { background-position: 48% 42%, 50% 118vh; }
  50%  { background-position: 52% 47%, 50% 126vh; }
  100% { background-position: 50% 44%, 50% 120vh; }
}

@media (prefers-reduced-motion: reduce){
  body{ animation: none; }
}

/* -----------------------------
   3) Header + horizontal nav scroller
   ----------------------------- */
.site-header{
  position: sticky; top: 0; z-index: 10;
  display: flex; align-items: center; gap: var(--space-4);
  padding: var(--space-4) min(4vw, 24px);
  border-bottom: 1px solid var(--card-border);

  /* 桌面轻 blur，iOS 禁用以避免独立合成层 */
  backdrop-filter: blur(8px);
  background: color-mix(in srgb, var(--bg) 85%, transparent);
}
@supports (-webkit-touch-callout: none){
  .site-header{ backdrop-filter: none;
    background: color-mix(in srgb, var(--bg) 92%, black 8%);
  }
}

.nav-scroller{
  flex: 1 1 auto; min-width: 0;
  overflow-x: auto; overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  white-space: nowrap;
  touch-action: pan-x;
  overscroll-behavior-x: contain;
  --fade: 16px;
  -webkit-mask-image: linear-gradient(to right, transparent 0, black var(--fade),
                      black calc(100% - var(--fade)), transparent 100%);
          mask-image: linear-gradient(to right, transparent 0, black var(--fade),
                      black calc(100% - var(--fade)), transparent 100%);
}
.nav-scroller::-webkit-scrollbar{ display:none; }

.nav-link{
  display:inline-block; padding: .25rem .5rem;
  border-radius: .5rem; color: var(--fg);
  text-decoration: none; opacity:.85;
}
.nav-link:hover{ opacity:1; background: rgba(255,255,255,.06); }

/* -----------------------------
   4) Layout helpers
   ----------------------------- */
.container{
  width: min(100%, 1040px);
  margin: 0 auto;
  padding: 0 min(4vw, 24px);
}

.grid{
  display: grid;
  gap: var(--space-5);
}
.home-grid{
  grid-template-columns: 1fr;
}
@media (min-width: 860px){
  .home-grid{
    grid-template-columns: 1fr 1fr 1fr;
    align-items: start;
  }
}

/* -----------------------------
   5) Hero block (transparent panel; background由body提供)
   ----------------------------- */
.hero{
  padding: clamp(1.2rem, 3vw + .5rem, 2.4rem);
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--card) 84%, transparent);
  border: 1px solid var(--card-border);
  box-shadow: var(--shadow);
}
.hero .title{ margin-bottom: var(--space-3); }
.hero .lede{ color: var(--muted); }

/* -----------------------------
   6) Cards
   ----------------------------- */
.card, .item-card, .home-card, .pub-item{
  background: color-mix(in srgb, var(--card) 92%, transparent);
  border: 1px solid var(--card-border);
  border-radius: var(--radius);
  padding: var(--space-5);
  box-shadow: var(--shadow);
}
.card h3, .home-card h3{ margin-bottom: var(--space-3); }

/* -----------------------------
   7) Buttons / tags
   ----------------------------- */
.btn{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:.55rem .9rem; border-radius:.7rem;
  border:1px solid color-mix(in srgb, var(--accent) 35%, transparent);
  background: linear-gradient(
    to bottom,
    color-mix(in srgb, var(--accent) 18%, transparent),
    color-mix(in srgb, var(--accent) 6%, transparent)
  );
  color: #00212a;
  text-decoration:none; font-weight:600;
  box-shadow: 0 1px 0 rgba(255,255,255,.2) inset, 0 6px 18px rgba(63,209,255,.18);
  transition: transform .06s ease, box-shadow .2s ease;
}
.btn:hover{ transform: translateY(-1px);
  box-shadow: 0 1px 0 rgba(255,255,255,.25) inset, 0 10px 24px rgba(63,209,255,.26);
}
.btn.secondary{
  border-color: var(--card-border);
  background: color-mix(in srgb, var(--card) 90%, transparent);
  color: var(--fg);
  box-shadow: none;
}

/* -----------------------------
   8) Footer
   ----------------------------- */
.site-footer{
  margin-top: var(--space-6);
  padding: var(--space-6) 0 var(--space-6);
  color: var(--muted);
  border-top: 1px solid var(--card-border);
  text-align: center;
}

/* -----------------------------
   9) Component hygiene
   ----------------------------- */
/* 清掉可能遗留的伪元素背景，避免“第二块背景”错觉 */
.hero::before, .hero::after,
body::before, body::after{ content:none; }
/* 不使用全站 !important 透明大锤，交由组件自行控制 */

/* -----------------------------
   10) iOS stitch lines guard (仅当你看到粘性边界缝线再打开)
   ----------------------------- */
/* .site-header{ contain: paint; } */
/* .container{ will-change: contents; } */
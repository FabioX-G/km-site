:root{
  --bg:#0b1020;--bg-alt:#0f1530;--fg:#e6e9f2;--muted:#aab3c5;--accent:#7bdff2;
  --card:#121939;--card-border:rgba(255,255,255,.08);--glass:rgba(255,255,255,.06);
  --neon-cyan:#33e1ff;--neon-magenta:#ff3d9a;--neon-violet:#8a5cff;

  --link: #9bd6ff;            /* bright, readable on dark */
  --link-hover: #d5f1ff;       /* lighter on hover */
  --link-underline: rgba(155,214,255,.45);
}
html[data-theme="light"]{
  --bg:#fff;--bg-alt:#f8fafc;--fg:#0a0a0a;--muted:#5b6473;--accent:#0ea5e9;
  --card:#fff;--card-border:rgba(0,0,0,.08);--glass:rgba(0,0,0,.04);

  --link: #0a66ff;             /* accessible blue on light */
  --link-hover: #084ccc;
  --link-underline: rgba(10,102,255,.35);
}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans";
  color:var(--fg);position:relative;overflow-x:hidden}

/* dynamic background */
body::before{
  content:"";position:fixed;inset:0;z-index:-1;pointer-events:none;
  background:
    radial-gradient(60vw 60vh at 15% 20%, color-mix(in oklab,var(--neon-cyan) 16%, transparent), transparent 60%),
    radial-gradient(70vw 70vh at 85% 15%, color-mix(in oklab,var(--neon-magenta) 14%, transparent), transparent 65%),
    radial-gradient(80vw 80vh at 50% 100%, color-mix(in oklab,var(--neon-violet) 12%, transparent), transparent 60%),
    linear-gradient(120deg, var(--bg), var(--bg-alt) 40%, var(--bg));
  filter:saturate(105%) contrast(102%);animation:bg-pan 28s linear infinite;transform:translateZ(0)
}
body::after{
  content:"";position:fixed;inset:-2px;z-index:-1;pointer-events:none;opacity:.07;mix-blend-mode:soft-light;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.55'/></svg>");
  background-size:300px 300px;animation:noise-move 9s steps(60) infinite
}
.bg-grid{position:fixed;inset:0;z-index:-1;pointer-events:none;
  background-image:
    linear-gradient(145deg, color-mix(in oklab, var(--fg) 6%, transparent) 1px, transparent 1px),
    linear-gradient(35deg,  color-mix(in oklab, var(--fg) 4%, transparent) 1px, transparent 1px);
  background-size:30px 30px,60px 60px;opacity:.07}
@keyframes bg-pan{0%{background-position:0% 0%,0% 0%,0% 0%,0% 0%}50%{background-position:10% 2%,-8% 4%,0% -4%,0% 0%}100%{background-position:0% 0%,0% 0%,0% 0%,0% 0%}}
@keyframes noise-move{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(-1%,1%,0)}}
@media (prefers-reduced-motion: reduce){body::before,body::after{animation:none}}

/* layout */
.container{width:min(1100px,92%);margin:0 auto;padding:3rem 0 6rem;position:relative;z-index:0}

/* header */
.site-header{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:space-between;
  padding:1rem min(4vw,24px);backdrop-filter:blur(8px);background:color-mix(in oklab,var(--bg) 80%, transparent);
  border-bottom:1px solid var(--card-border)}
.brand{font-weight:700;color:var(--fg);text-decoration:none}
.nav{display:flex;gap:1rem;align-items:center}
.nav-link{color:var(--muted);text-decoration:none;padding:.25rem .5rem;border-radius:8px}
.nav-link:hover,.nav-link.active{color:var(--fg);background:var(--card-border)}
#themeToggle{border:1px solid var(--card-border);background:transparent;color:var(--fg);padding:.4rem .6rem;border-radius:8px;cursor:pointer}

/* hero */
.hero{display:grid;grid-template-columns:140px 1fr;gap:2rem;align-items:center;margin-top:2rem}
.headshot{width:140px;height:140px;border-radius:50%;object-fit:cover;border:2px solid var(--card-border)}
.hero-copy h1{font-size:clamp(1.8rem,3vw,2.6rem);margin:0;font-family:"IBM Plex Serif",serif}
.tagline{margin-top:.5rem;color:var(--muted);font-size:1.05rem}
.lede{margin-top:1rem;line-height:1.7}
.cta{margin-top:1.25rem;display:flex;gap:.75rem}
.btn{padding:.6rem .9rem;border-radius:10px;text-decoration:none;color:var(--bg);background:var(--accent);font-weight:600}
.btn.ghost{background:transparent;color:var(--accent);border:1px solid var(--accent)}

/* sleek grids/lists/timeline */
.grid-sleek{display:grid;gap:12px;grid-template-columns:repeat(3,minmax(0,1fr));margin-top:1rem}
@media (max-width:900px){.grid-sleek{grid-template-columns:1fr}}
.item-card{background:color-mix(in oklab,var(--card) 92%, transparent);border:1px solid var(--card-border);
  border-radius:14px;padding:1rem 1.1rem;transition:transform .18s ease,border-color .18s ease,background-color .18s ease}
.item-card:hover{transform:translateY(-1.5px);border-color:color-mix(in oklab,var(--accent) 30%, var(--card-border))}
.item-head{display:flex;align-items:baseline;justify-content:space-between;gap:.75rem}
.item-title{margin:0;font-size:1.05rem;font-weight:600}
.item-meta{color:var(--muted);font-size:.92rem}
.item-body{margin-top:.45rem;line-height:1.6}
.item-actions{margin-top:.6rem;display:flex;gap:.6rem;align-items:center}
.item-link{text-decoration:none;color:var(--accent);font-weight:600}
.tags{margin-top:.5rem;display:flex;flex-wrap:wrap;gap:.4rem}.tag{padding:.24rem .5rem;border-radius:999px;border:1px solid var(--card-border);color:var(--muted);font-size:.78rem}
.pub-list{margin-top:1rem;display:grid;gap:10px}
.pub-item{border:1px solid var(--card-border);border-left:3px solid color-mix(in oklab,var(--accent) 65%, var(--card-border));
  border-radius:12px;overflow:hidden;padding:.9rem 1rem;background:color-mix(in oklab,var(--card) 94%, transparent)}
.pub-title{margin:0;font-weight:600}.pub-meta{color:var(--muted);font-size:.9rem;margin-top:.2rem}.pub-blurb{margin-top:.5rem;line-height:1.6}
.timeline{position:relative;margin-top:1rem}
.timeline::before{content:"";position:absolute;left:10px;top:0;bottom:0;width:2px;background:color-mix(in oklab,var(--fg) 10%, transparent)}
.ti{position:relative;padding-left:30px;margin-bottom:14px}
.ti::before{content:"";position:absolute;left:4px;top:.35rem;width:12px;height:12px;border-radius:999px;background:var(--accent);box-shadow:0 0 0 3px color-mix(in oklab,var(--accent) 25%, transparent)}
.ti-head{display:flex;gap:.5rem;flex-wrap:wrap;align-items:baseline}.ti-role{font-weight:700}.ti-org{color:var(--muted)}.ti-dates{margin-left:auto;color:var(--muted);font-size:.9rem}
.ti-body{margin-top:.35rem}.ti-body ul{margin:.2rem 0 0 1rem}
.section-head{display:flex;align-items:baseline;justify-content:space-between;gap:.75rem;margin-top:.5rem}
.section-head h1,.section-head h2{margin:0}

/* content & footer */
main h1,main h2,main h3{font-family:"IBM Plex Serif",serif}
main h1{margin:0 0 1rem;font-size:clamp(1.6rem,3vw,2.2rem)}
main p,main li{line-height:1.7;color:var(--fg)}
.home-grid{margin-top:3rem;display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
.home-card{background:var(--card);border:1px solid var(--card-border);border-radius:16px;padding:1.2rem 1.3rem}
.home-card h2{margin:0 0 .4rem 0;font-family:"IBM Plex Serif",serif}
.bullets{margin:.5rem 0 0 0;padding-left:1.2rem}

.site-footer{width:min(1100px,92%);margin:2rem auto 2rem;display:flex;justify-content:space-between;align-items:center;gap:1rem;color:var(--muted);
  backdrop-filter:blur(.5px);border-top:1px solid var(--glass);padding-top:1rem}
.site-footer a{color:var(--muted);text-decoration:none}.site-footer a:hover{color:var(--fg)}

@media (max-width:900px){.hero{grid-template-columns:1fr;text-align:left}.headshot{width:120px;height:120px}.home-grid{grid-template-columns:1fr}}

/* Accessible links */
a{
  color: var(--link);
  text-decoration: underline;
  text-decoration-color: var(--link-underline);
  text-underline-offset: 3px;
}
a:hover, a:focus{
  color: var(--link-hover);
  text-decoration-color: currentColor;
}

/* Make list items in content areas extra legible */
main li{ line-height: 1.8; }

/* Footer links: keep contrast, reduce underline noise */
.site-footer a{
  color: var(--link);
  text-decoration-thickness: .08rem;
}
.site-footer a:hover{
  color: var(--link-hover);
}

/* --- iOS Safari fix: avoid "fixed layer detaches on pinch-zoom" --- */
/* Detect iOS Safari via a supported property */
@supports (-webkit-touch-callout: none) {
  /* Let the background layers scroll with the document on iOS */
  body::before,
  body::after,
  .bg-grid {
    position: absolute;   /* was: fixed */
    inset: 0;
  }

  /* Ensure the document is tall enough for absolute layers to cover */
  html, body { min-height: 100%; }
}